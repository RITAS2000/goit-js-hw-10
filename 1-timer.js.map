{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport icon from '/img/octagon.svg';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = null;\nlet interval;\nconst input = document.querySelector('#datetime-picker');\nconst button = document.querySelector('button[data-start]');\nbutton.disabled = true;\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  minuteIncrement: 1,\n  locale: {\n    firstDayOfWeek: 1,\n    weekdays: {\n      shorthand: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n      longhand: [\n        'Sunday',\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday',\n        'Saturday',\n      ],\n    },\n  },\n  onClose(selectedDates) {\n    if (selectedDates.length > 0) {\n      const selectedDate = selectedDates[0];\n\n      if (selectedDate.getTime() < Date.now()) {\n        iziToast.show({\n          title: 'Error',\n          titleColor: '#FFFFFF',\n          message: 'Please choose a date in the future',\n          messageColor: '#FFFFFF',\n          position: 'topRight',\n          color: '#EF4040',\n          timeout: 3000,\n          iconColor: '#fff',\n          iconUrl: '/img/octagon.svg',\n        });\n        button.disabled = true;\n        return;\n      }\n\n      userSelectedDate = selectedDate;\n      button.disabled = false;\n\n      // localStorage.setItem('userSelectedDate', selectedDate.getTime());\n      // localStorage.removeItem('timeLeft');\n    }\n  },\n  dateFormat: 'Y-m-d H:i',\n  defaultDate: new Date(),\n});\n\n// const savedDate = localStorage.getItem('userSelectedDate');\n// if (savedDate) {\n//   userSelectedDate = new Date(Number(savedDate));\n//   button.disabled = true;\n//   input.disabled = true;\n// }\n\nbutton.addEventListener('click', () => {\n  startTimer(userSelectedDate);\n  input.disabled = true;\n  button.disabled = true;\n});\n\nfunction startTimer(targetDate) {\n  if (interval) {\n    clearInterval(interval);\n  }\n\n  interval = setInterval(() => {\n    const currentTime = new Date();\n    const timeLeft = targetDate - currentTime;\n\n    // localStorage.setItem('timeLeft', timeLeft);\n\n    if (timeLeft <= 0) {\n      clearInterval(interval);\n      input.disabled = false;\n      button.disabled = true;\n\n      // localStorage.removeItem('userSelectedDate');\n      // localStorage.removeItem('timeLeft');\n    } else {\n      const daysLeft = Math.floor(timeLeft / (1000 * 60 * 60 * 24));\n      const hoursLeft = Math.floor(\n        (timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\n      );\n      const minutesLeft = Math.floor(\n        (timeLeft % (1000 * 60 * 60)) / (1000 * 60)\n      );\n      const secondsLeft = Math.floor((timeLeft % (1000 * 60)) / 1000);\n\n      days.textContent = String(daysLeft).padStart(2, '0');\n      hours.textContent = String(hoursLeft).padStart(2, '0');\n      minutes.textContent = String(minutesLeft).padStart(2, '0');\n      seconds.textContent = String(secondsLeft).padStart(2, '0');\n    }\n  }, 1000);\n}\n\n// const savedTimeLeft = localStorage.getItem('timeLeft');\n// if (savedTimeLeft && userSelectedDate) {\n//   const remainingTime = Number(savedTimeLeft);\n//   if (remainingTime > 0) {\n//     startTimer(userSelectedDate);\n//   } else {\n//     button.disabled = true;\n//     input.disabled = false;\n//   }\n// }\n// localStorage.removeItem('userSelectedDate');\n// localStorage.removeItem('timeLeft');\n"],"names":["userSelectedDate","interval","input","button","days","hours","minutes","seconds","flatpickr","selectedDates","selectedDate","iziToast","startTimer","targetDate","timeLeft","daysLeft","hoursLeft","minutesLeft","secondsLeft"],"mappings":"+IAMA,IAAIA,EAAmB,KACnBC,EACJ,MAAMC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAS,SAAS,cAAc,oBAAoB,EAC1DA,EAAO,SAAW,GAClB,MAAMC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvDC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,gBAAiB,EACjB,OAAQ,CACN,eAAgB,EAChB,SAAU,CACR,UAAW,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EACpD,SAAU,CACR,SACA,SACA,UACA,YACA,WACA,SACA,UACD,CACF,CACF,EACD,QAAQC,EAAe,CACrB,GAAIA,EAAc,OAAS,EAAG,CAC5B,MAAMC,EAAeD,EAAc,CAAC,EAEpC,GAAIC,EAAa,QAAO,EAAK,KAAK,IAAG,EAAI,CACvCC,EAAS,KAAK,CACZ,MAAO,QACP,WAAY,UACZ,QAAS,qCACT,aAAc,UACd,SAAU,WACV,MAAO,UACP,QAAS,IACT,UAAW,OACX,QAAS,kBACnB,CAAS,EACDR,EAAO,SAAW,GAClB,MACD,CAEDH,EAAmBU,EACnBP,EAAO,SAAW,EAInB,CACF,EACD,WAAY,YACZ,YAAa,IAAI,IACnB,CAAC,EASDA,EAAO,iBAAiB,QAAS,IAAM,CACrCS,EAAWZ,CAAgB,EAC3BE,EAAM,SAAW,GACjBC,EAAO,SAAW,EACpB,CAAC,EAED,SAASS,EAAWC,EAAY,CAC1BZ,GACF,cAAcA,CAAQ,EAGxBA,EAAW,YAAY,IAAM,CAE3B,MAAMa,EAAWD,EADG,IAAI,KAKxB,GAAIC,GAAY,EACd,cAAcb,CAAQ,EACtBC,EAAM,SAAW,GACjBC,EAAO,SAAW,OAIb,CACL,MAAMY,EAAW,KAAK,MAAMD,EAAY,KAAoB,EACtDE,EAAY,KAAK,MACpBF,GAAY,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAC1D,EACYG,EAAc,KAAK,MACtBH,GAAY,IAAO,GAAK,KAAQ,IAAO,GAChD,EACYI,EAAc,KAAK,MAAOJ,GAAY,IAAO,IAAO,GAAI,EAE9DV,EAAK,YAAc,OAAOW,CAAQ,EAAE,SAAS,EAAG,GAAG,EACnDV,EAAM,YAAc,OAAOW,CAAS,EAAE,SAAS,EAAG,GAAG,EACrDV,EAAQ,YAAc,OAAOW,CAAW,EAAE,SAAS,EAAG,GAAG,EACzDV,EAAQ,YAAc,OAAOW,CAAW,EAAE,SAAS,EAAG,GAAG,CAC1D,CACF,EAAE,GAAI,CACT"}