{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport icon from '../img/octagon.svg';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = null;\nlet interval;\nconst input = document.querySelector('#datetime-picker');\nconst button = document.querySelector('button[data-start]');\nbutton.disabled = true;\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  minuteIncrement: 1,\n  locale: {\n    firstDayOfWeek: 1,\n    weekdays: {\n      shorthand: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n      longhand: [\n        'Sunday',\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday',\n        'Saturday',\n      ],\n    },\n  },\n  onClose(selectedDates) {\n    if (selectedDates.length > 0) {\n      const selectedDate = selectedDates[0];\n\n      if (selectedDate.getTime() < Date.now()) {\n        iziToast.show({\n          title: 'Error',\n          titleColor: '#FFFFFF',\n          message: 'Please choose a date in the future',\n          messageColor: '#FFFFFF',\n          position: 'topRight',\n          color: '#EF4040',\n          timeout: 3000,\n          iconUrl: icon,\n        });\n        button.disabled = true;\n        return;\n      }\n      userSelectedDate = selectedDate;\n      button.disabled = false;\n    }\n  },\n  dateFormat: 'Y-m-d H:i',\n  defaultDate: new Date(),\n});\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds };\n}\n\nbutton.addEventListener('click', startTimer);\n\nfunction startTimer() {\n  input.disabled = true;\n  button.disabled = true;\n  interval = setInterval(() => {\n    const timeLeft = userSelectedDate - new Date();\n    if (timeLeft <= 0) {\n      clearInterval(interval);\n      input.disabled = false;\n      return;\n    }\n    const { days: d, hours: h, minutes: m, seconds: s } = convertMs(timeLeft);\n    days.textContent = addLeadingZero(d);\n    hours.textContent = addLeadingZero(h);\n    minutes.textContent = addLeadingZero(m);\n    seconds.textContent = addLeadingZero(s);\n  }, 1000);\n}\n"],"names":["userSelectedDate","interval","input","button","days","hours","minutes","seconds","flatpickr","selectedDates","selectedDate","iziToast","icon","addLeadingZero","value","convertMs","ms","startTimer","timeLeft","d","h","m"],"mappings":"uIAMA,IAAIA,EAAmB,KACnBC,EACJ,MAAMC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAS,SAAS,cAAc,oBAAoB,EAC1DA,EAAO,SAAW,GAClB,MAAMC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvDC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,gBAAiB,EACjB,OAAQ,CACN,eAAgB,EAChB,SAAU,CACR,UAAW,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EACpD,SAAU,CACR,SACA,SACA,UACA,YACA,WACA,SACA,UACD,CACF,CACF,EACD,QAAQC,EAAe,CACrB,GAAIA,EAAc,OAAS,EAAG,CAC5B,MAAMC,EAAeD,EAAc,CAAC,EAEpC,GAAIC,EAAa,QAAO,EAAK,KAAK,IAAG,EAAI,CACvCC,EAAS,KAAK,CACZ,MAAO,QACP,WAAY,UACZ,QAAS,qCACT,aAAc,UACd,SAAU,WACV,MAAO,UACP,QAAS,IACT,QAASC,CACnB,CAAS,EACDT,EAAO,SAAW,GAClB,MACD,CACDH,EAAmBU,EACnBP,EAAO,SAAW,EACnB,CACF,EACD,WAAY,YACZ,YAAa,IAAI,IACnB,CAAC,EAED,SAASU,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CACA,SAASC,EAAUC,EAAI,CAMrB,MAAMZ,EAAO,KAAK,MAAMY,EAAK,KAAG,EAC1BX,EAAQ,KAAK,MAAOW,EAAK,MAAO,IAAI,EACpCV,EAAU,KAAK,MAAQU,EAAK,MAAO,KAAQ,GAAM,EACjDT,EAAU,KAAK,MAASS,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAZ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEAJ,EAAO,iBAAiB,QAASc,CAAU,EAE3C,SAASA,GAAa,CACpBf,EAAM,SAAW,GACjBC,EAAO,SAAW,GAClBF,EAAW,YAAY,IAAM,CAC3B,MAAMiB,EAAWlB,EAAmB,IAAI,KACxC,GAAIkB,GAAY,EAAG,CACjB,cAAcjB,CAAQ,EACtBC,EAAM,SAAW,GACjB,MACD,CACD,KAAM,CAAE,KAAMiB,EAAG,MAAOC,EAAG,QAASC,EAAG,QAAS,CAAC,EAAKN,EAAUG,CAAQ,EACxEd,EAAK,YAAcS,EAAeM,CAAC,EACnCd,EAAM,YAAcQ,EAAeO,CAAC,EACpCd,EAAQ,YAAcO,EAAeQ,CAAC,EACtCd,EAAQ,YAAcM,EAAe,CAAC,CACvC,EAAE,GAAI,CACT"}